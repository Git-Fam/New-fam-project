@use "../global" as *;

/* -----------------------
  aptitude
----------------------- */

.aptitude {
  @include imgCover("aptitude-bk.webp");
  background-position: center bottom;
  position: relative;

  @include pc {
    height: 100vh;
    min-height: 700px;
  }

  @include sp {
    padding: s(50) s(20);
  }

  // 幅が1000px以下の場合
  @media screen and (max-width: 1000px) and (min-width: 768px) {
    height: 100vh;
    min-height: p(2000);
    padding: p(50) p(20);

    .aptitude__inner {
      position: unset;
      transform: unset;
      width: 100%;
      height: 95%;
      flex-direction: column;
      gap: p(50);

      .aptitude__container {
        width: 100%;
        flex-shrink: unset;
        height: clamp(700px, p(800), 800px);

        &--contents {
          height: 92%;

          .contents--memo {

            .TX {
              font-size: p(25);
            }
          }


          .contents--inner {
            .inner--lists {
              .list {

                .question--item {
                  margin-bottom: pmi(20);

                  .TX {
                    font-size: p(30);

                    span {
                      font-size: p(20);
                    }
                  }
                }

                .answer--item {
                  gap: p(100);

                  .answer-wrap {
                    width: p(50);
                    height: p(50);

                    .answer-label {

                      p {
                        font-size: p(20);
                      }
                    }
                  }
                }

                &.list--btn {
                  .list--btn__area {
                    .btn {
                      width: calc(50% - pmi(10));
                      padding: p(74) p(45) p(30);

                      &--inner {
                        .icon {
                          width: p(42);
                          height: p(39);
                          margin-bottom: p(19);
                        }

                        .TX {
                          font-size: p(23);
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }

      .aptitude__character {
        height: unset;
        position: relative;
        width: 80%;
        margin: 0 auto;

        .character--message {
          position: unset;
          margin: 0 auto p(20);
          width: 100%;
          margin: 0 auto;

          &--inner {

            .TX {
              color: #646464;
              @include wt700;
              line-height: 175%;

              @include pc {
                font-size: pmi(20);
              }

              @include sp {}
            }
          }
        }

        .character--texture {
          position: unset;
        }
      }
    }
  }

  &__inner {
    display: flex;

    @include pc {
      position: absolute;
      transform: translate(-50%, -50%);
      top: 50%;
      left: 49.5%;
      width: calc((1190 / 1280) * 100%);
      height: 90%;
      justify-content: space-between;
      gap: p(27);
    }

    @include sp {
      flex-direction: column;
      gap: s(30);
    }

    .aptitude__container {
      border-radius: 10px;
      background: #CFC6B6;
      box-shadow: 0px 4px 8px 0px #EEE4D3 inset;
      position: relative;
      z-index: 2;

      @include pc {
        width: pm(764, 600);
        height: 100%;
        padding: pmi(40) pmi(50) pmi(16);
        flex-shrink: 0;
      }

      @include sp {
        width: 100%;
        padding: s(20) s(10);
      }

      &--top {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;

        .aptitude--title {

          .TL {
            color: #7E7360;
            @include tsuku;
            @include wt700;
            line-height: 70%;

            @include pc {
              font-size: clamp(30px, p(38.795), 40px);
            }

            @include sp {
              font-size: s(20);
            }
          }
        }

        .aptitude--progress {
          display: flex;
          align-items: flex-end;

          @include pc {
            gap: pmi(8);
          }

          @include sp {
            gap: s(8);
          }


          .progress--wrap {
            border-radius: 94.633px;
            background: #948975;
            position: relative;
            border: solid #948975;

            @include pc {
              width: clamp(300px, p(360), 500px);
              height: pmi(10);
              border-width: clamp(1px, p(1), 2px);
            }

            @include sp {
              width: s(170);
              height: s(10);
              border-width: s(1);
            }

            .progress--bar {
              position: absolute;
              height: 100%;
              border-radius: 94.633px;
              background: #80C868;
              width: calc(100% * 1 / 15);
              transition: all 0.3s ease;
            }
          }

          .progress--text {

            .TX {
              color: #948975;
              @include tsuku;
              @include wt700;
              line-height: 1;

              @include pc {
                font-size: 25.351px;
              }

              @include sp {
                font-size: s(16);
              }

              &--num {
                @include wt700;
              }
            }
          }
        }

      }

      &--contents {
        width: 100%;
        background: #F4F6F8;
        filter: drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.25));

        @include pc {
          margin-top: pmi(20);
          height: 95%;
          padding: pmi(10);
        }

        @include sp {
          margin-top: s(15);
          padding: s(5);
        }

        .contents--memo {
          display: flex;
          align-items: center;
          justify-content: space-between;
          background: linear-gradient(90deg, rgba(173, 199, 234, 0.50) 0%, rgba(234, 173, 173, 0.50) 100%);

          @include pc {
            padding: pmi(3) pmi(6) pmi(5);
            margin-bottom: pmi(9);
          }

          @include sp {
            padding: s(3) s(6) s(5);
            margin-bottom: s(5);
          }

          .TX {
            color: #7CA9E4;
            @include tsuku;
            @include wt700;
            line-height: 1.5;

            @include pc {
              font-size: pmi(16);
            }

            @include sp {
              font-size: s(14);
            }

            &:nth-child(2) {
              color: #E78181;
            }
          }
        }


        .contents--inner {
          overflow-y: scroll;

          @include pc {
            height: 95%;
          }

          @media screen and (max-width: 1000px) and (min-width: 768px) {
            height: 90%;
          }

          @include sp {
            max-height: 80vh;
          }


          .inner--lists {
            display: none;

            &.active {
              display: block;
            }

            &:first-child {
              .list--btn {
                .list--btn__area {
                  .prev-btn {
                    opacity: 0;
                    pointer-events: none;
                  }
                }
              }
            }

            &:last-child {
              .list--btn {
                .list--btn__area {
                  .next-btn {
                    display: none;
                  }
                }
              }
            }

            .list {
              position: relative;

              @include pc {
                padding: pmi(30) pmi(10);
              }

              @include sp {
                padding: s(20) s(5);
              }

              &::before,
              &::after {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                @include iconContain($ellipse-dot-aptitude);
                background-position: left center;
                background-repeat: repeat-x;

                @include pc {
                  height: clamp(2px, p(2), 3px);
                }

                @include sp {
                  height: s(2);
                }
              }

              &::after {
                display: none;
              }

              &:last-child {
                &::after {
                  display: block;
                  top: unset;
                  bottom: 0;
                }
              }

              .question--item {

                @include pc {
                  margin-bottom: pmi(15);
                }

                @include sp {
                  margin-bottom: s(25);
                }

                .TX {
                  color: #333;
                  text-align: center;
                  @include tsuku;
                  @include wt700;
                  line-height: 1.5;

                  @include pc {
                    font-size: clamp(16px, p(16), 25px);
                  }

                  @include sp {
                    font-size: s(16);
                  }

                  span {
                    @include wt700;

                    @include pc {
                      font-size: clamp(13px, p(13), 20px);
                    }

                    @include sp {
                      font-size: s(12);
                    }
                  }
                }
              }

              .answer--item {
                display: flex;

                @include pc {
                  justify-content: center;
                  gap: clamp(50px, p(70), 100px);
                }

                @include sp {
                  justify-content: space-around;
                }

                .answer-wrap {
                  position: relative;
                  border-radius: 94.633px;
                  transition: all 0.3s ease;

                  &:nth-child(1) {
                    .answer-radio {
                      background: #ADC7EA;
                    }
                  }

                  &:nth-child(2) {
                    .answer-radio {
                      background: #D4E0F0;
                    }
                  }

                  &:nth-child(3) {
                    .answer-radio {
                      background: #D9D9D9;
                    }
                  }

                  &:nth-child(4) {
                    .answer-radio {
                      background: #F0DAD4;
                    }
                  }

                  &:nth-child(5) {
                    .answer-radio {
                      background: #EAADAD;
                    }
                  }

                  &:hover {
                    box-shadow: 0px 0px 20px 8px #80C868;

                    .answer-radio {
                      background: #80C868;
                    }
                  }

                  @include pc {
                    width: clamp(30px, p(30), 50px);
                    height: clamp(30px, p(30), 50px);
                  }

                  @include sp {
                    width: s(30);
                    height: s(30);
                  }

                  .answer-label {
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    z-index: 2;

                    p {
                      color: #FFF;
                      text-align: center;
                      @include tsuku;
                      @include wt700;
                      line-height: 1;

                      @include pc {
                        font-size: clamp(13px, p(13), 20px);
                      }

                      @include sp {
                        font-size: s(13);
                      }
                    }
                  }

                  .answer-radio {
                    appearance: none;
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    z-index: 1;
                    border-radius: 94.633px;
                    margin: 0;
                    padding: 0;

                    &:checked {
                      background: #80C868;
                    }

                    &.change {
                      background: #9e9e9e;
                    }
                  }
                }
              }

              &.list--btn {
                padding: 0;

                .list--btn__area {
                  display: flex;

                  @include pc {
                    gap: pmi(20);
                  }

                  @include sp {
                    gap: s(20);
                  }

                  .btn {
                    cursor: pointer;

                    @include pc {
                      width: calc(50% - pmi(10));
                      padding: pmi(54) pmi(25) pmi(20);
                    }

                    @include sp {
                      width: calc(50% - s(10));
                      padding: s(30) s(25) s(20);
                    }

                    &.next-btn {

                      .btn--inner {
                        margin-left: auto;
                      }
                    }

                    &.result-btn {
                      padding: 0;
                      background: #80C868;
                      border-radius: 94.633px;

                      @include pc {
                        margin: pmi(10) 0;
                      }

                      @include sp {}

                      .btn--inner {
                        height: 100%;
                        width: 100%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                      }
                    }

                    &--inner {
                      width: fit-content;

                      .icon {
                        @include iconContain($nate-arrow-aptitude);
                        margin: 0 auto;

                        @include pc {
                          width: pmi(32);
                          height: pmi(29);
                          margin-bottom: pmi(9);
                        }

                        @include sp {
                          width: s(32);
                          height: s(29);
                          margin-bottom: s(9);
                        }

                        &.icon--next {
                          transform: scaleX(-1);
                        }
                      }

                      .TX {
                        color: #948975;
                        text-align: center;
                        @include tsuku;
                        @include wt700;
                        line-height: 1.3;

                        @include pc {
                          font-size: pmi(13);
                        }

                        @include sp {
                          font-size: s(13);
                        }

                        &.TX-bg {
                          @include pc {
                            font-size: pmi(26);
                          }

                          @include sp{
                            font-size: s(20);
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }

      // 高さが1000px以下の場合
      @media screen and (max-height: 1000px) and (min-height: 0px) and (min-width:1000px) {
        .aptitude__container--contents {
          height: 90%;

          .contents--inner {
            height: 90%;
          }
        }
      }
    }

    .aptitude__character {
      position: relative;
      z-index: 1;

      @include pc {
        width: 100%;
        height: 100%;
      }

      @include sp {
        width: 100%;
        margin: 0 auto;
      }

      .character--message {
        border-radius: 30px;
        background: #FFF;
        width: 100%;
        position: relative;
        z-index: 99;

        &.active {
          animation: fade-one-time 1s ease;
        }

        @keyframes fade-one-time {
          0% {
            opacity: 0;
          }

          100% {
            opacity: 1;
          }
        }

        @include pc {
          padding: pmi(30) pmi(47);
          position: absolute;
          bottom: pmi(500);
          left: 0;
        }

        @include sp {
          padding: s(30) s(20);
        }

        &--inner {

          .TX {
            color: #646464;
            @include wt700;
            line-height: 175%;

            @include pc {
              font-size: pmi(20);
            }

            @include sp {
              font-size: s(16);
            }
          }
        }
      }

      .character--texture {
        width: 100%;
        z-index: 99;

        @include pc {
          position: absolute;
          bottom: 0;
          right: 0;
        }

        @include sp {
          position: relative;
        }

        iframe {
          width: 100%;
          position: relative;
          z-index: 99;

          @include pc {
            height: pmi(460);
          }

          @include sp {
            height: s(230);
          }
        }

      }

      .character--animation {

        .character-item {
          position: absolute;
          z-index: 1;
          opacity: 1;
          bottom: 10%;

          &:nth-child(odd) {
            transform: translateX(-50%) rotate(30deg);
            left: -100%;

            &.active {
              animation: character-item-animation-type-01 3s ease;
            }
          }

          &:nth-child(even) {
            transform: translateX(50%) rotate(-30deg);
            right: -100%;

            &.active {
              animation: character-item-animation-type-02 3s ease;
            }
          }

          &.item-01 {
            @include imgContain("aptitude-characters/character-01.webp");
            aspect-ratio: 1203/885;

            @include pc {
              width: clamp(250px, p(300), 450px);
            }

            @include sp {
              width: s(200);
            }
          }

          &.item-02 {
            @include imgContain("aptitude-characters/character-02.webp");
            aspect-ratio: 776/1229;

            @include pc {
              width: clamp(160px, p(160), 225px);
            }

            @include sp {
              width: s(130);
            }
          }

          &.item-03 {
            @include imgContain("aptitude-characters/character-03.webp");
            aspect-ratio: 842/1252;

            @include pc {
              width: clamp(160px, p(160), 225px);
            }

            @include sp {
              width: s(130);
            }
          }

          &.item-04 {
            @include imgContain("aptitude-characters/character-04.webp");
            aspect-ratio: 795/839;

            @include pc {
              width: clamp(160px, p(160), 225px);
            }

            @include sp {
              width: s(130);
            }
          }

          &.item-05 {
            @include imgContain("aptitude-characters/character-05.webp");
            aspect-ratio: 716/858;
            opacity: 1;

            @include pc {
              width: clamp(160px, p(160), 225px);
            }

            @include sp {
              width: s(130);
            }
          }

          &.item-06 {
            @include imgContain("aptitude-characters/character-06.webp");
            aspect-ratio: 716/858;

            @include pc {
              width: clamp(160px, p(160), 225px);
            }

            @include sp {
              width: s(130);
            }
          }

          &.item-07 {
            @include imgContain("aptitude-characters/character-07.webp");
            aspect-ratio: 726/527;
            bottom: 0%;
            transform: translateX(50%) rotate(0deg);

            @include pc {
              width: clamp(140px, p(160), 225px);
            }

            @include sp {
              width: s(130);
            }

            &.active {
              animation: character-item-animation-type-03 3s ease;
            }
          }

          &.item-08 {
            @include imgContain("aptitude-characters/character-08.webp");
            aspect-ratio: 280/304;
            bottom: 0%;
            transform: translateX(-50%) rotate(0deg);

            @include pc {
              width: clamp(70px, p(80), 100px);
            }

            @include sp {
              width: s(80);
            }
          }

          &.item-09 {
            @include imgContain("aptitude-characters/character-09.webp");
            aspect-ratio: 817/998;

            @include pc {
              width: clamp(200px, p(250), 300px);
            }

            @include sp {
              width: s(130);
            }
          }

          &.item-10 {
            @include imgContain("aptitude-characters/character-10.webp");
            aspect-ratio: 817/998;

            @include pc {
              width: clamp(200px, p(250), 300px);
            }

            @include sp {
              width: s(130);
            }
          }

          &.item-11 {
            @include imgContain("aptitude-characters/character-11.webp");
            aspect-ratio: 817/998;

            @include pc {
              width: clamp(200px, p(250), 300px);
            }

            @include sp {
              width: s(130);
            }
          }

          &.item-12 {
            @include imgContain("aptitude-characters/character-12.webp");
            aspect-ratio: 817/998;

            @include pc {
              width: clamp(200px, p(250), 300px);
            }

            @include sp {
              width: s(130);
            }
          }

          &.item-13 {
            @include imgContain("aptitude-characters/character-13.webp");
            aspect-ratio: 987/979;

            @include pc {
              width: clamp(200px, p(250), 300px);
            }

            @include sp {
              width: s(130);
            }
          }

          &.item-14 {
            @include imgContain("aptitude-characters/character-14.webp");
            aspect-ratio: 920/891;

            @include pc {
              width: clamp(200px, p(250), 300px);
            }

            @include sp {
              width: s(130);
            }
          }

          &.item-15 {
            @include imgContain("aptitude-characters/character-15.webp");
            aspect-ratio: 817/998;

            @include pc {
              width: clamp(150px, p(200), 250px);
            }

            @include sp {
              width: s(130);
            }
          }

          @keyframes character-item-animation-type-01 {

            0%,
            100% {
              opacity: 0;
            }

            20%,
            80% {
              left: 0%;
              opacity: 1;
            }

            50% {
              left: 0%;
              opacity: 1;
            }
          }

          @keyframes character-item-animation-type-02 {

            0%,
            100% {
              opacity: 0;
            }

            20%,
            80% {
              right: 0%;
              opacity: 1;
            }

            50% {
              right: 0%;
              opacity: 1;
            }
          }

          @keyframes character-item-animation-type-03 {

            0%,
            100% {
              opacity: 0;
            }

            20%,
            80% {
              left: -22%;
              opacity: 1;
            }

            50% {
              left: -22%;
              opacity: 1;
            }
          }
        }
      }


      // 高さが1000px以下で、横幅が1000px以上の場合
      @media screen and (max-height: 1000px) and (min-height: 0px) and (min-width:1000px) {

        .contents--inner {
          overflow-y: scroll;

          @include pc {
            height: 95%;
          }

          @include sp {
            max-height: 80vh;
          }
        }

        .character--message {
          bottom: unset;
          top: 0;

          &--inner {
            height: clamp(120px, p(120), 120px);
            overflow-y: scroll;
          }
        }

        .character--texture {

          iframe {
            height: pmi(460);
          }
        }
      }
    }
  }
}