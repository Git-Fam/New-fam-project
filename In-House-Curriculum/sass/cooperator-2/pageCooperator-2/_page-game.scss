@use "../../global" as *;
@use "../globalCooperator-2" as *;

/* -----------------------
  page-game
----------------------- */

@font-face {
  font-family: 'BestTenDot';
  src: url('../font/BestTen-DOT.woff2') format('woff2'),
    url('../font/BestTen-DOT.otf') format('opentype');
  font-weight: normal;
  font-style: normal;
}


.game-main {
  @include height;
  font-family: 'BestTenDot', sans-serif;
  @include imgCover("game-bg.jpg");
  width: 100%;
  height: 100vh;
  position: relative;
  display: flex;
  align-items: center;


  @include pc {
    overflow-x: auto;
  }

  .game-wrap {
    position: relative;
    margin: 0 auto;

    @include pc {
      @include iconContain($game-wrap-bg);
      width: pm(1210, 1000);
      height: pm(666, 550);
      padding: p(18) pm(50) 0;
    }

    @include sp {
      @include iconContain($game-wrap-bg-sp);
      width: min(90%, 378px);
      aspect-ratio: 378 / 681;
    }

    .inner {
      position: relative;
      left: 50%;
      translate: -50% 0;

      @include pc {
        @include iconContain($game-inner-bg);
        width: pm(1108, 900);
        height: pm(540, 450);
      }

      @include sp {
        @include iconCover($game-inner-bg-sp);
        width: 80%;
        aspect-ratio: 334 / 569;
        top: 5%;
        overflow-y: scroll;
      }

      .game-container {
        position: relative;

        @include pc {
          z-index: 1;
        }

        @include sp {
          z-index: 2;
        }

        &.game-top {
          @include pc {
            padding: pm(55, 40) pm(130, 90) pm(55, 40) pm(110, 90);
          }

          @include sp {
            padding: 5% 3%;
          }

          .TL-box {
            display: flex;

            @include pc {
              gap: pm(38);
              align-items: end;
            }

            @include sp {
              flex-direction: column;
              gap: min(s(5), 5px);
            }

            .TL {
              img {
                @include pc {
                  width: pm(331, 266);
                  height: pm(104, 83);
                }

                @include sp {
                  width: 60%;
                  height: auto;
                }
              }
            }

            .TX {
              color: $F-43505F;
              line-height: 1.68;

              @include pc {
                font-size: pm(16, 14);
              }

              @include sp {
                font-size: min(s(11), 11px);
              }
            }
          }

          .level {
            &-list {
              display: flex;

              @include pc {
                justify-content: space-between;
                width: pm(819, 700);
                align-items: center;
                margin: pm(108, 80) auto 0;
              }

              @include sp {
                flex-direction: column;
                width: 60%;
                gap: min(s(25), 25px);
                margin: min(s(30), 30px) auto 0;
              }

              li {
                .level-item {
                  display: block;

                  @include pc {
                    width: pm(200, 150);
                    height: pm(200, 150);
                  }

                  @include sp {
                    width: 100%;
                    aspect-ratio: 1 / 1;
                    margin: 0 auto;
                  }

                  .item-bg {
                    background: $B-B4C1B0;
                    width: 100%;
                    height: 100%;
                    display: grid;
                    place-items: center center;

                    .chara {
                      @include pc {
                        width: pm(121, 100);
                        height: pm(137, 110);
                      }

                      @include sp {
                        width: 50%;
                        aspect-ratio: 1 / 1;
                      }
                    }
                  }
                }

                &.beginner {
                  .chara {
                    @include imgContain("beginner-icon.png");
                  }
                }

                &.intermediate {
                  .chara {
                    @include imgContain("intermediate-icon.png");
                  }
                }

                &.advanced {
                  .chara {
                    @include imgContain("advanced-icon.png");
                  }
                }

                &.active {
                  position: relative;

                  .level-item {
                    .item-bg {
                      @include imgCover("level-hover-bg.png");
                      background-size: 200%;
                      background-repeat: repeat;
                      animation: level 4s linear infinite;

                      @keyframes level {
                        0% {
                          background-position: -100% 100%;
                        }

                        10% {
                          background-position: -75% 75%; // 中間点を追加
                        }

                        20% {
                          background-position: -50% 50%; // 中間点を追加
                        }

                        30% {
                          background-position: -25% 25%; // 中間点を追加
                        }

                        50% {
                          background-position: 0 0;
                        }

                        70% {
                          background-position: 25% -25%; // 中間点を追加
                        }

                        80% {
                          background-position: 50% -50%; // 中間点を追加
                        }

                        90% {
                          background-position: 75% -75%; // 中間点を追加
                        }

                        100% {
                          background-position: 100% -100%;
                        }
                      }
                    }
                  }

                  &::before {
                    content: "";
                    background: $B-45565E;
                    position: absolute;
                    z-index: -1;
                    left: 50%;
                    translate: -50% 0;

                    @include pc {
                      width: pm(239, 190);
                      height: pm(273, 210);
                      bottom: pm(-23, -18);
                    }

                    @include sp {
                      width: 110%;
                      aspect-ratio: 239 / 260;
                      bottom: -5%;
                    }
                  }

                  &::after {
                    content: "";
                    @include imgContain("level01.svg");
                    position: absolute;
                    left: 50%;
                    translate: -50% 0;

                    @include pc {
                      width: pm(46, 35);
                      height: pm(25, 20);
                      top: pm(-45, -40);
                    }

                    @include sp {
                      width: 18%;
                      aspect-ratio: 46 / 25;
                      top: -11%;
                    }
                  }

                  &.beginner {
                    .item-bg {
                      .chara {
                        @include imgContain("beginner-icon-hover.png");
                      }
                    }

                    &::after {
                      @include imgContain("level01.svg");
                    }
                  }

                  &.intermediate {
                    .item-bg {
                      .chara {
                        @include imgContain("intermediate-icon-hover.png");
                      }
                    }

                    &::after {
                      @include imgContain("level02.svg");
                    }
                  }

                  &.advanced {
                    .item-bg {
                      .chara {
                        @include imgContain("advanced-icon-hover.png");
                      }
                    }

                    &::after {
                      @include imgContain("level03.svg");
                    }
                  }
                }
              }
            }
          }
        }
      }

      .game-character {
        
        @include pc {
          position: absolute;
          z-index: 2;
          bottom: pm(20, 20);
          left: pm(90, 80);
        }

        @include sp {
          position: relative;
          z-index: 1;
          bottom: 5%;
          left: 10%;
        }

        .img {
          @include imgContain("beginner-icon-hover.png");
          aspect-ratio: 121 / 137;

          @include pc {
            width: pm(121, 100);
          }

          @include sp {
            width: min(s(100), 100px);
          }
        }

        .text-frame {
          @include iconContain($game-character-text-frame);
          aspect-ratio: 146 / 52;
          
          @include pc {
            position: absolute;
            padding: pm(14, 12) 0 pm(21, 20);
            width: pm(146, 120);
            left: 100%;
            bottom: 90%;
            z-index: 2;
          }

          @include sp {
            padding: min(s(10), 10px) 0 min(s(14), 12px);
            width: min(s(120), 120px);
            z-index: 1;
            left: 90%;
            bottom: 100%;
          }

          .TX {
            color: #43505F;
            line-height: 1;
            text-align: center;

            @include pc {
              font-size: pm(13, 12);
            }

            @include sp {
              font-size: min(s(12), 12px);
            }
          }
        }
      }

      .game-mob {

        .img {
          @include iconContain($game-mob);
          aspect-ratio: 82 / 63;
          
          @include pc {
            position: absolute;
            width: pm(82, 75);
            z-index: 2;
            bottom: pm(20, 20);
            right: pm(120, 100);
          }

          @include sp {
            width: min(s(75), 75px);
            z-index: 1;
            bottom: 5%;
            right: 10%;
          }

          &:nth-child(2) {
            @include pc {
              right: pm(240, 220);
              bottom: pm(60, 60);
            }

            @include sp {
              display: none;
            }
          }

          &:nth-child(3) {
            @include pc {
              right: pm(360, 340);
            }

            @include sp {
              display: none;
            }
          }
        }
      }

    }

    .lever {
      @include iconContain($game-lever);
      position: absolute;

      @include pc {
        width: pm(58, 50);
        height: pm(127, 100);
        bottom: pm(50, 40);
        left: pm(100, 80);
      }

      @include sp {
        width: 10%;
        aspect-ratio: 58 / 127;
        bottom: 7%;
        left: 10%;
      }
    }

    .btn {
      @include iconContain($game-btn);
      position: absolute;

      @include pc {
        width: pm(118, 90);
        height: pm(54, 40);
        bottom: pm(30, 20);
        right: pm(100, 80);
      }

      @include sp {
        width: 16%;
        aspect-ratio: 118 / 54;
        bottom: 7%;
        right: 10%;
      }
    }
  }
}