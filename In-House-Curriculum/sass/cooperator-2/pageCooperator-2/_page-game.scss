@use "../../global"as *;
@use "../globalCooperator-2"as *;

/* -----------------------
  page-game
----------------------- */

@font-face {
  font-family: 'BestTenDot';
  src: url('../font/BestTen-DOT.woff2') format('woff2'),
    url('../font/BestTen-DOT.otf') format('opentype');
  font-weight: normal;
  font-style: normal;
}


.game-main {
  @include height;
  font-family: 'BestTenDot', sans-serif;
  @include imgCover("game-bg.webp");
  width: 100%;
  height: 100vh;
  position: relative;
  display: flex;
  align-items: center;

  @include pc {
    overflow-x: auto;
  }



  .game-wrap {
    position: relative;
    margin: 0 auto;

    @include pc {
      @include iconContain($game-wrap-bg);
      width: pm(1210, 1000);
      height: pm(666, 550);
      padding: p(18) pm(50) 0;
    }

    @include sp {
      @include iconContain($game-wrap-bg-sp);
      width: min(90%, 378px);
      aspect-ratio: 378 / 681;
    }

    .game--menu-btn {
      position: fixed;
      z-index: 99;

      @include pc {
        top: p(10);
        right: p(20);
      }

      @include sp {
        top: 10px;
        right: 20px;
      }

      .C_all-menu-btn {
        @include pc {
          border-radius: pm(13.257);
          padding: pm(8) pm(18) pm(11) pm(8);
          border-width: pm(3.314);
        }

        @include sp {
          border-radius: 13.257px;
          padding: 3px 5px 4px 5px;
          border-width: 2px;
        }


        &__inner {
          display: flex;

          @include pc {
            gap: pm(5);
          }

          @include sp {
            gap: 3px;
          }

          &__img {

            @include pc {
              width: pm(80);
              height: pm(50);
            }

            @include sp {
              width: 35px;
              height: 32px;
            }
          }

          &__text {

            .TX {
              line-height: 1.5;

              @include pc {
                font-size: pm(34);
                letter-spacing: pm(2.651);
              }

              @include sp {
                font-size: 16px;
                letter-spacing: 2px;
              }
            }
          }
        }

        &:hover {
          transform: translate(3.314px, 3.314px);
        }
      }
    }

    .inner {
      position: relative;
      left: 50%;
      translate: -50% 0;

      @include pc {
        @include iconContain($game-inner-bg);
        width: pm(1108, 900);
        height: pm(540, 450);
      }

      @include sp {
        @include iconCover($game-inner-bg-sp);
        width: 80%;
        aspect-ratio: 334 / 569;
        top: 5%;
        overflow-y: scroll;
      }

      .game-container {
        position: relative;

        @include pc {
          z-index: 1;
        }

        @include sp {
          z-index: 2;
        }

        &.game-top {
          @include pc {
            padding: pm(55, 40) pm(130, 90) pm(55, 40) pm(110, 90);
          }

          @include sp {
            padding: 5% 3%;
          }

          .TL-box {
            display: flex;

            @include pc {
              gap: pm(38);
              align-items: end;
            }

            @include sp {
              flex-direction: column;
              gap: min(s(5), 5px);
            }

            .TL {
              img {
                @include pc {
                  width: pm(331, 266);
                  height: pm(104, 83);
                }

                @include sp {
                  width: 60%;
                  height: auto;
                }
              }
            }

            .TX {
              color: $F-43505F;
              line-height: 1.68;

              @include pc {
                font-size: pm(16, 14);
              }

              @include sp {
                font-size: min(s(11), 11px);
              }
            }
          }

          .level {
            &-list {
              display: flex;

              @include pc {
                justify-content: space-between;
                width: pm(819, 700);
                align-items: center;
                margin: pm(108, 80) auto 0;
              }

              @include sp {
                flex-direction: column;
                width: 60%;
                gap: min(s(25), 25px);
                margin: min(s(30), 30px) auto 0;
              }

              li {
                .level-item {
                  display: block;

                  @include pc {
                    width: pm(200, 150);
                    height: pm(200, 150);
                  }

                  @include sp {
                    width: 100%;
                    aspect-ratio: 1 / 1;
                    margin: 0 auto;
                  }

                  .item-bg {
                    background: $B-B4C1B0;
                    width: 100%;
                    height: 100%;
                    display: grid;
                    place-items: center center;

                    .chara {
                      @include pc {
                        width: pm(121, 100);
                        height: pm(137, 110);
                      }

                      @include sp {
                        width: 50%;
                        aspect-ratio: 1 / 1;
                      }
                    }
                  }
                }

                &.beginner {
                  .chara {
                    @include imgContain("beginner-icon.webp");
                  }
                }

                &.intermediate {
                  .chara {
                    @include imgContain("intermediate-icon.webp");
                  }
                }

                &.advanced {
                  .chara {
                    @include imgContain("advanced-icon.webp");
                  }
                }

                &.active {
                  position: relative;

                  .level-item {
                    .item-bg {
                      @include imgCover("level-hover-bg.webp");
                      background-size: 200%;
                      background-repeat: repeat;
                      animation: level 4s linear infinite;

                      @keyframes level {
                        0% {
                          background-position: -100% 100%;
                        }

                        10% {
                          background-position: -75% 75%; // 中間点を追加
                        }

                        20% {
                          background-position: -50% 50%; // 中間点を追加
                        }

                        30% {
                          background-position: -25% 25%; // 中間点を追加
                        }

                        50% {
                          background-position: 0 0;
                        }

                        70% {
                          background-position: 25% -25%; // 中間点を追加
                        }

                        80% {
                          background-position: 50% -50%; // 中間点を追加
                        }

                        90% {
                          background-position: 75% -75%; // 中間点を追加
                        }

                        100% {
                          background-position: 100% -100%;
                        }
                      }
                    }
                  }

                  &::before {
                    content: "";
                    background: $B-45565E;
                    position: absolute;
                    z-index: -1;
                    left: 50%;
                    translate: -50% 0;

                    @include pc {
                      width: pm(239, 190);
                      height: pm(273, 210);
                      bottom: pm(-23, -18);
                    }

                    @include sp {
                      width: 110%;
                      aspect-ratio: 239 / 260;
                      bottom: -5%;
                    }
                  }

                  &::after {
                    content: "";
                    @include imgContain("level01.svg");
                    position: absolute;
                    left: 50%;
                    translate: -50% 0;

                    @include pc {
                      width: pm(46, 35);
                      height: pm(25, 20);
                      top: pm(-45, -40);
                    }

                    @include sp {
                      width: 18%;
                      aspect-ratio: 46 / 25;
                      top: -11%;
                    }
                  }

                  &.beginner {
                    .item-bg {
                      .chara {
                        @include imgContain("beginner-icon-hover.webp");
                      }
                    }

                    &::after {
                      @include imgContain("level01.svg");
                    }
                  }

                  &.intermediate {
                    .item-bg {
                      .chara {
                        @include imgContain("intermediate-icon-hover.webp");
                      }
                    }

                    &::after {
                      @include imgContain("level02.svg");
                    }
                  }

                  &.advanced {
                    .item-bg {
                      .chara {
                        @include imgContain("advanced-icon-hover.webp");
                      }
                    }

                    &::after {
                      @include imgContain("level03.svg");
                    }
                  }
                }
              }
            }
          }
        }
      }

      .chara-box {
        @include sp {
          position: relative;
          display: flex;
          bottom: 5%;
        }


        .game-character {

          @include pc {
            position: absolute;
            z-index: 2;
            bottom: pm(20, 20);
            left: pm(70, 50);
          }

          @include sp {
            position: relative;
            z-index: 1;
            bottom: 5%;
            left: 10%;
          }

          animation: scale 2s infinite 0s reverse;

          @keyframes scale {

            0%,
            21%,
            100% {
              transform: scale(1);
            }

            1%,
            20% {
              transform: scale(-1, 1);
            }
          }

          .img {
            @include imgContain("beginner-icon-hover.webp");
            aspect-ratio: 121 / 137;

            @include pc {
              width: pm(121, 100);
            }

            @include sp {
              width: min(s(100), 100px);
            }
          }

        }

        .text-frame {
          @include iconContain($game-character-text-frame);
          aspect-ratio: 146 / 52;

          @include pc {
            position: absolute;
            padding: pm(14, 12) 0 pm(21, 20);
            width: pm(146, 120);
            left: 13%;
            bottom: 29%;
            z-index: 2;
          }

          @include sp {
            position: absolute;
            padding: min(s(10), 10px) 0 min(s(14), 12px);
            width: min(s(120), 120px);
            z-index: 1;
            left: 40%;
            bottom: 100%;
          }

          .TX {
            color: #43505F;
            line-height: 1;
            text-align: center;

            @include pc {
              font-size: pm(13, 12);
            }

            @include sp {
              font-size: min(s(12), 12px);
            }
          }
        }


        .game-mob {


          .img {
            @include iconContain($game-mob);
            aspect-ratio: 82 / 63;

            @include pc {
              position: absolute;
              width: pm(82, 75);
              z-index: 2;
              bottom: pm(20, 20);
              right: pm(120, 100);
            }

            @include sp {
              position: absolute;
              width: min(s(75), 75px);
              z-index: 1;
              bottom: 0;
              right: 10%;
            }

            &:nth-child(2) {
              @include pc {
                right: pm(240, 220);
              }

              @include sp {
                display: none;
              }

            }

            &:nth-child(3) {
              @include pc {
                right: pm(360, 340);
              }

              @include sp {
                display: none;
              }
            }

            animation: game-pyon 3s infinite;

            @keyframes game-pyon {
              0% {
                transform: translateY(0%);
              }

              10% {
                transform: translateY(15%);
              }

              20% {
                transform: translateY(-50%);
              }

              40%,
              100% {
                transform: translateY(0%);
              }
            }
          }
        }
      }

    }

    .lever {
      @include iconContain($game-lever);
      position: absolute;

      @include pc {
        width: pm(58, 50);
        height: pm(127, 100);
        bottom: pm(50, 40);
        left: pm(100, 80);
      }

      @include sp {
        width: 10%;
        aspect-ratio: 58 / 127;
        bottom: 7%;
        left: 10%;
      }
    }

    .btn {
      @include iconContain($game-btn);
      position: absolute;

      @include pc {
        width: pm(118, 90);
        height: pm(54, 40);
        bottom: pm(30, 20);
        right: pm(100, 80);
      }

      @include sp {
        width: 16%;
        aspect-ratio: 118 / 54;
        bottom: 7%;
        right: 10%;
      }
    }
    .hdq_aria_label{
      color: $F-43505F !important;
    }
  }
}